"use strict";angular.module("BrowserCache",[]).service("browserCacheManager",["$cacheFactory",function(a){var b=-1,c="BrowserCache",d=function(a){var b=a,c=a,d=c.indexOf("?");return-1===d&&(d=c.indexOf("#")),-1!==d&&(b=c.substring(0,d)),b};this.__cacheFactory=this.__cacheFactory||a(c),this.get=function(a){a=d(a);var c=this.__cacheFactory.get(a)||this.__cacheFactory.put(a,b);return c},this.invalidateResourceCache=function(a){a=d(a);var b=this.__cacheFactory.get(a);b&&this.__cacheFactory.put(a,Number(b)-1)}}]).factory("browserCacheInterceptor",["$q","browserCacheManager",function(a,b){var c="rev";return{request:function(d){if(-1===d.url.indexOf(".html"))if("GET"===d.method){var e=c+"="+b.get(d.url);d.url+=(d.url.split("?")[1]?"&":"?")+e}else("POST"===d.method||"PUT"===d.method||"PATCH"===d.method)&&b.invalidateResourceCache(d.url);return d||a.when(d)}}}]);